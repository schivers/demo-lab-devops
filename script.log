INFO:__main__:"mistapi" package version 0.44.1 is required, you are currently using version 0.52.4.
DEBUG:__main__:opts: -f is vars/sites.csv
DEBUG:__main__:opts: -e is ../.mist_env
DEBUG:__main__:opts: --org_id is e92db139-f481-4e64-a674-2d521d106894
DEBUG:__main__:opts: --google_api_key is *****************
DEBUG:__main__:opts: --org_name is Demo-lab
INFO:mistapi:mistapi:init:package version 0.52.4
DEBUG:mistapi:apisession:_load_env:loading settings from /home/administrator/.mist_env
DEBUG:mistapi:apisession:set_cloud
DEBUG:mistapi:apisession:set_cloud:Mist Cloud configured to api.eu.mist.com
DEBUG:mistapi:apisession:set_api_token
INFO:mistapi:apisession:set_api_token:found 1 API Tokens
DEBUG:mistapi:apisession:_check_api_tokens
INFO:mistapi:apisession:_check_api_tokens:there is only 1 API token. No check required
INFO:mistapi:apisession:set_api_token:API Token configured
DEBUG:mistapi:apisession:__init__: API Session initialized
DEBUG:mistapi:apisession:login
DEBUG:mistapi:apisession:login:not authenticated yet
DEBUG:mistapi:apisession:_set_authenticated
DEBUG:mistapi:apisession:_set_authenticated:authentication_status is True
INFO:mistapi:apisession:_set_authenticated: session is now "Authenticated"
DEBUG:mistapi:apisession:get_authentication_status:return True
INFO:mistapi:apisession:login:authenticated
DEBUG:mistapi:apisession:_getself
INFO:mistapi:apisession:_getself: sending GET request to "/api/v1/self"
DEBUG:mistapi:apirequest:_url:https://api.eu.mist.com/api/v1/self
DEBUG:mistapi:apirequest:_gen_query:processing query None
DEBUG:mistapi:apirequest:_gen_query:generated query:?
INFO:mistapi:apirequest:mist_get:sending request to https://api.eu.mist.com/api/v1/self
DEBUG:mistapi:apirequest:mist_get:request headers:{'User-Agent': 'python-requests/2.25.1', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Authorization': '***hidden***'}
INFO:mistapi:apiresponse:__init__:response status code: 200
DEBUG:mistapi:apiresponse:_check_next
DEBUG:mistapi:apiresponse:__init__:HTTP response processed
INFO:mistapi:apisession:_getself:authentication Ok. Processing account privileges
INFO:mistapi:apisession:_getself:account used:  
DEBUG:mistapi:apirequest:_url:https://api.eu.mist.com/api/v1/orgs/e92db139-f481-4e64-a674-2d521d106894
DEBUG:mistapi:apirequest:_gen_query:processing query {}
DEBUG:mistapi:apirequest:_gen_query:generated query:?
INFO:mistapi:apirequest:mist_get:sending request to https://api.eu.mist.com/api/v1/orgs/e92db139-f481-4e64-a674-2d521d106894
DEBUG:mistapi:apirequest:mist_get:request headers:{'User-Agent': 'python-requests/2.25.1', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Authorization': '***hidden***'}
INFO:mistapi:apiresponse:__init__:response status code: 200
DEBUG:mistapi:apiresponse:_check_next
DEBUG:mistapi:apiresponse:__init__:HTTP response processed
INFO:__main__:Loading Geocoder: Google: Success
DEBUG:mistapi:apirequest:_url:https://api.eu.mist.com/api/v1/orgs/e92db139-f481-4e64-a674-2d521d106894/sites
DEBUG:mistapi:apirequest:_gen_query:processing query {'limit': 1000, 'page': 1}
DEBUG:mistapi:apirequest:_gen_query:generated query:?limit=1000&page=1&
INFO:mistapi:apirequest:mist_get:sending request to https://api.eu.mist.com/api/v1/orgs/e92db139-f481-4e64-a674-2d521d106894/sites?limit=1000&page=1
DEBUG:mistapi:apirequest:mist_get:request headers:{'User-Agent': 'python-requests/2.25.1', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Authorization': '***hidden***'}
INFO:mistapi:apiresponse:__init__:response status code: 200
DEBUG:mistapi:apiresponse:_check_next
DEBUG:mistapi:apiresponse:__init__:HTTP response processed
INFO:__main__:Retrieving Sites from Org: Success
WARNING:__main__:_check_sites:site Juniper France already exists. Won't be created...
INFO:__main__:Preparing Sites Import
INFO:__main__:Validating Sites data
INFO:__main__:Validating Sites data: Success
DEBUG:mistapi:apirequest:_url:https://api.eu.mist.com/api/v1/orgs/e92db139-f481-4e64-a674-2d521d106894/sitegroups
DEBUG:mistapi:apirequest:_gen_query:processing query {'page': 1, 'limit': 100}
DEBUG:mistapi:apirequest:_gen_query:generated query:?page=1&limit=100&
INFO:mistapi:apirequest:mist_get:sending request to https://api.eu.mist.com/api/v1/orgs/e92db139-f481-4e64-a674-2d521d106894/sitegroups?page=1&limit=100
DEBUG:mistapi:apirequest:mist_get:request headers:{'User-Agent': 'python-requests/2.25.1', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Authorization': '***hidden***'}
INFO:mistapi:apiresponse:__init__:response status code: 200
DEBUG:mistapi:apiresponse:_check_next
DEBUG:mistapi:apiresponse:__init__:HTTP response processed
INFO:__main__:Retrieving sitegroup from Mist: Success
INFO:__main__:Creating Sites
INFO:__main__:Site Shaun UK: updating IDs: Success
DEBUG:__main__:_get_google_geocoding: URL: https://maps.googleapis.com/maps/api/geocode/json?address=144%20church%20farm%20road%2C%20emersons%20green%2C%20bristol%2C%20United%20Kingdom&key:AIz...dX8
DEBUG:__main__:_get_google_geocoding: Response: b'{\n   "results" : \n   [\n      {\n         "address_components" : \n         [\n            {\n               "long_name" : "144",\n               "short_name" : "144",\n               "types" : \n               [\n                  "street_number"\n               ]\n            },\n            {\n               "long_name" : "Church Farm Road",\n               "short_name" : "Church Farm Rd",\n               "types" : \n               [\n                  "route"\n               ]\n            },\n            {\n               "long_name" : "Emersons Green",\n               "short_name" : "Emersons Green",\n               "types" : \n               [\n                  "locality",\n                  "political"\n               ]\n            },\n            {\n               "long_name" : "Bristol",\n               "short_name" : "Bristol",\n               "types" : \n               [\n                  "postal_town"\n               ]\n            },\n            {\n               "long_name" : "South Gloucestershire",\n               "short_name" : "South Gloucestershire",\n               "types" : \n               [\n                  "administrative_area_level_2",\n                  "political"\n               ]\n            },\n            {\n               "long_name" : "England",\n               "short_name" : "England",\n               "types" : \n               [\n                  "administrative_area_level_1",\n                  "political"\n               ]\n            },\n            {\n               "long_name" : "United Kingdom",\n               "short_name" : "GB",\n               "types" : \n               [\n                  "country",\n                  "political"\n               ]\n            },\n            {\n               "long_name" : "BS16 7BF",\n               "short_name" : "BS16 7BF",\n               "types" : \n               [\n                  "postal_code"\n               ]\n            }\n         ],\n         "formatted_address" : "144 Church Farm Rd, Emersons Green, Bristol BS16 7BF, UK",\n         "geometry" : \n         {\n            "bounds" : \n            {\n               "northeast" : \n               {\n                  "lat" : 51.4890748,\n                  "lng" : -2.4787738\n               },\n               "southwest" : \n               {\n                  "lat" : 51.4889591,\n                  "lng" : -2.4789553\n               }\n            },\n            "location" : \n            {\n               "lat" : 51.4890237,\n               "lng" : -2.4788593\n            },\n            "location_type" : "ROOFTOP",\n            "viewport" : \n            {\n               "northeast" : \n               {\n                  "lat" : 51.4903492802915,\n                  "lng" : -2.477515569708498\n               },\n               "southwest" : \n               {\n                  "lat" : 51.4876513197085,\n                  "lng" : -2.480213530291502\n               }\n            }\n         },\n         "place_id" : "ChIJM9cM1bSacUgRLAsWY_oYkR0",\n         "types" : \n         [\n            "premise"\n         ]\n      }\n   ],\n   "status" : "OK"\n}'
DEBUG:__main__:_get_google_geocoding: Response JSON: {'results': [{'address_components': [{'long_name': '144', 'short_name': '144', 'types': ['street_number']}, {'long_name': 'Church Farm Road', 'short_name': 'Church Farm Rd', 'types': ['route']}, {'long_name': 'Emersons Green', 'short_name': 'Emersons Green', 'types': ['locality', 'political']}, {'long_name': 'Bristol', 'short_name': 'Bristol', 'types': ['postal_town']}, {'long_name': 'South Gloucestershire', 'short_name': 'South Gloucestershire', 'types': ['administrative_area_level_2', 'political']}, {'long_name': 'England', 'short_name': 'England', 'types': ['administrative_area_level_1', 'political']}, {'long_name': 'United Kingdom', 'short_name': 'GB', 'types': ['country', 'political']}, {'long_name': 'BS16 7BF', 'short_name': 'BS16 7BF', 'types': ['postal_code']}], 'formatted_address': '144 Church Farm Rd, Emersons Green, Bristol BS16 7BF, UK', 'geometry': {'bounds': {'northeast': {'lat': 51.4890748, 'lng': -2.4787738}, 'southwest': {'lat': 51.4889591, 'lng': -2.4789553}}, 'location': {'lat': 51.4890237, 'lng': -2.4788593}, 'location_type': 'ROOFTOP', 'viewport': {'northeast': {'lat': 51.4903492802915, 'lng': -2.477515569708498}, 'southwest': {'lat': 51.4876513197085, 'lng': -2.480213530291502}}}, 'place_id': 'ChIJM9cM1bSacUgRLAsWY_oYkR0', 'types': ['premise']}], 'status': 'OK'}
INFO:__main__:_get_google_geocoding: Request succeed with Data
DEBUG:__main__:_get_google_tz: Response: b'{\n   "dstOffset" : 0,\n   "rawOffset" : 0,\n   "status" : "OK",\n   "timeZoneId" : "Europe/London",\n   "timeZoneName" : "Greenwich Mean Time"\n}'
DEBUG:__main__:_get_google_geocoding: Response JSON: {'dstOffset': 0, 'rawOffset': 0, 'status': 'OK', 'timeZoneId': 'Europe/London', 'timeZoneName': 'Greenwich Mean Time'}
INFO:__main__:_get_google_tz: Request succeed with Data
DEBUG:__main__:geocoding: Returns {'results': [{'address_components': [{'long_name': '144', 'short_name': '144', 'types': ['street_number']}, {'long_name': 'Church Farm Road', 'short_name': 'Church Farm Rd', 'types': ['route']}, {'long_name': 'Emersons Green', 'short_name': 'Emersons Green', 'types': ['locality', 'political']}, {'long_name': 'Bristol', 'short_name': 'Bristol', 'types': ['postal_town']}, {'long_name': 'South Gloucestershire', 'short_name': 'South Gloucestershire', 'types': ['administrative_area_level_2', 'political']}, {'long_name': 'England', 'short_name': 'England', 'types': ['administrative_area_level_1', 'political']}, {'long_name': 'United Kingdom', 'short_name': 'GB', 'types': ['country', 'political']}, {'long_name': 'BS16 7BF', 'short_name': 'BS16 7BF', 'types': ['postal_code']}], 'formatted_address': '144 Church Farm Rd, Emersons Green, Bristol BS16 7BF, UK', 'geometry': {'bounds': {'northeast': {'lat': 51.4890748, 'lng': -2.4787738}, 'southwest': {'lat': 51.4889591, 'lng': -2.4789553}}, 'location': {'lat': 51.4890237, 'lng': -2.4788593}, 'location_type': 'ROOFTOP', 'viewport': {'northeast': {'lat': 51.4903492802915, 'lng': -2.477515569708498}, 'southwest': {'lat': 51.4876513197085, 'lng': -2.480213530291502}}}, 'place_id': 'ChIJM9cM1bSacUgRLAsWY_oYkR0', 'types': ['premise']}], 'status': 'OK', 'location': {'address': '144 Church Farm Rd, Emersons Green, Bristol BS16 7BF, UK', 'latitude': 51.4890237, 'longitude': -2.4788593}, 'country_code': 'GB', 'tz': 'Europe/London'}
INFO:__main__:Site Shaun UK: Retrievning geo information: Success
DEBUG:mistapi:apirequest:_url:https://api.eu.mist.com/api/v1/orgs/e92db139-f481-4e64-a674-2d521d106894/sites
INFO:mistapi:apirequest:mist_post:sending request to https://api.eu.mist.com/api/v1/orgs/e92db139-f481-4e64-a674-2d521d106894/sites
DEBUG:mistapi:apirequest:mist_post:Request body:{'name': 'Shaun UK', 'address': '144 church farm road, emersons green, bristol, United Kingdom', 'sitegroup_ids': ['fe46dd2f-ae83-460b-aeee-506a968f56af', 'e7fdf83e-f132-4572-8084-1d5cd950147c'], 'latlng': {'lat': 51.4890237, 'lng': -2.4788593}, 'timezone': 'Europe/London', 'country_code': 'GB'}
DEBUG:mistapi:apirequest:mist_post:request headers:{'User-Agent': 'python-requests/2.25.1', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Authorization': '***hidden***', 'Content-Type': 'application/json', 'Content-Length': '296'}
DEBUG:mistapi:apirequest:mist_post:request body:b'{"name": "Shaun UK", "address": "144 church farm road, emersons green, bristol, United Kingdom", "sitegroup_ids": ["fe46dd2f-ae83-460b-aeee-506a968f56af", "e7fdf83e-f132-4572-8084-1d5cd950147c"], "latlng": {"lat": 51.4890237, "lng": -2.4788593}, "timezone": "Europe/London", "country_code": "GB"}'
INFO:mistapi:apiresponse:__init__:response status code: 200
DEBUG:mistapi:apiresponse:_check_next
DEBUG:mistapi:apiresponse:__init__:HTTP response processed
INFO:__main__:Site Shaun UK: Created (ID 3034d25c-1720-41dd-aa40-44dea8bbd6ae): Success
DEBUG:mistapi:apirequest:_url:https://api.eu.mist.com/api/v1/sites/3034d25c-1720-41dd-aa40-44dea8bbd6ae/setting
INFO:mistapi:apirequest:mist_put:sending request to https://api.eu.mist.com/api/v1/sites/3034d25c-1720-41dd-aa40-44dea8bbd6ae/setting
DEBUG:mistapi:apirequest:mist_put:Request body:{'vars': {'vlan_guest': '3', 'vlan_corp': '2'}}
DEBUG:mistapi:apirequest:mist_put:request headers:{'User-Agent': 'python-requests/2.25.1', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'Connection': 'keep-alive', 'Authorization': '***hidden***', 'Content-Type': 'application/json', 'Content-Length': '47'}
DEBUG:mistapi:apirequest:mist_put:request body:b'{"vars": {"vlan_guest": "3", "vlan_corp": "2"}}'
INFO:mistapi:apiresponse:__init__:response status code: 200
DEBUG:mistapi:apiresponse:_check_next
DEBUG:mistapi:apiresponse:__init__:HTTP response processed
INFO:__main__:Site Shaun UK: Updating Site settings: Success
INFO:__main__:Site Import Done
